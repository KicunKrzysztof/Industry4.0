//produkty: akcje w ramach jednego stage mogą być wykonywane w różnej kolejności

//maszyny: gniazdo dodane jako pole w maszynie, jedyne zastosowanie gniazd jakie wymyśliłem to takie
//że transport w ramach tego samego soketa nie zabierałby czasu, a pomiędzy soketami zabierałby

//in/outBufferCapacity wielkośc buforów maszyny, przeczytałem o tym z tej stronki o Chryslerze-Daimlerze,
//tam podejście było inne niż u nas, ale takie bufory dodają jakiegoś realizmu (pełny buufor in - maszyna zapchana)
//ale niesie to ze sobą problem deadlocków - więc  może jednak to olać i uznać że maszyny mają nieskończony bufor? co na to Paprzycki? (IMO deadlocki to duży problem)

//opis przykładu: produkt końcowy samchód, w stage 1 tworzona jest skorupa samochodu,
//a w stage 2 montowane fotele i montowany silnik w dowolnej kolejności

{
   "$schema":"http://json-schema.org/schema#",
   "type":"object",
   "required":[
      "machines",
      "products",
      "simulation"
   ],
   "properties":{
      "machines":{
         "type":"array",
         "items":{
            "type":"object",
            "required":[
               "machineId",
               "socketId",
               "inBufferCapacity",
               "outBufferCapacity",
               "actions"
            ],
            "properties":{
               "machineId":{
                  "type":"integer"
               },
               "socketId":{
                  "type":"integer"
               },
               "inBufferCapacity":{
                  "type":"integer"
               },
               "outBufferCapacity":{
                  "type":"integer"
               },
               "actions":{
                  "type":"array",
                  "items":{
                     "type":"object",
                     "required":[
                        "productName",
                        "stageId",
                        "actionName",
                        "productionTime"
                     ],
                     "properties":{
                        "productName":{
                           "type":"string"
                        },
                        "stageId":{
                           "type":"integer"
                        },
                        "actionName":{
                           "type":"string"
                        },
                        "productionTime":{
                           "type":"integer",
                           "minimum":0
                        }
                     }
                  }
               }
            }
         }
      },
      "products":{
         "type":"array",
         "items":{
            "type":"object",
            "required":[
               "name",
               "stages"
            ],
            "properties":{
               "name":{
                  "type":"string"
               },
               "stages":{
                  "type":"array",
                  "items":{
                     "type":"object",
                     "required":[
                        "stageId",
                        "actions"
                     ],
                     "properties":{
                        "stageId":{
                           "type":"integer"
                        },
                        "actions":{
                           "type":"array",
                           "items":{
                              "type":"object",
                              "required":[
                                 "actionName",
                                 "subproducts"
                              ],
                              "properties":{
                                 "actionName":{
                                    "type":"string"
                                 },
                                 "subproducts":{
                                    "type":"array",
                                    "item":{
                                       "type":"string"
                                    }
                                 }
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "simulation":{
         "type":"array",
         "items":{
            "type":"object",
            "required":[
               "duration",
               "demandedProducts"
            ],
            "properties":{
               "duration":{
                  "type":"integer",
                  "minimum":0
               },
               "demandedProducts":{
                  "type":"array",
                  "items":{
                     "type":"object",
                     "required":[
                        "name",
                        "amount",
                        "priority"
                     ],
                     "properties":{
                        "name":{
                           "type":"string"
                        },
                        "amount":{
                           "type":"integer",
                           "minimum":1
                        },
                        "priority":{
                           "type":"integer",
                           "minimum":1,
                           "maximum":10
                        }
                     }
                  }
               },
               "breakdowns":{
                  "type":"array",
                  "items":{
                     "type":"object",
                     "required":[
                        "machineId",
                        "duration"
                     ],
                     "properties":{
                        "machineId":{
                           "type":"integer"
                        },
                        "duration":{
                           "type":"integer",
                           "minimum":1
                        }
                     }
                  }
               }
            }
         }
      }
   }
}